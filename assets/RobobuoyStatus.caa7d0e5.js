import{T as ue,a as de,Q as E}from"./TouchPan.1e1f7d92.js";import{c as R,d as ce,b as me}from"./render.64f49b6a.js";import{v as U,_ as C,l as z,f as l,K as i,L as a,S as c,O as v,M as s,N as w,a9 as L,c as b,w as be,E as fe,X as _e,j as ve,P as x}from"./index.8ff8d99e.js";import{Q as B,a as X,u as J}from"./QCircularProgress.e8d478a7.js";import{Q as f}from"./QBtn.bb686e65.js";import{Q as H,a as he}from"./QCard.4437fc36.js";import{a as P}from"./bluetooth.93429ee0.js";import{e as G,n as D}from"./format.211a1e6b.js";import{u as ge,a as ye}from"./use-form.13265217.js";const Se=U("div",{class:"q-space"});var ke=R({name:"QSpace",setup(){return()=>Se}});const pe={name:"MarkNumber",props:["number"],components:{},data(){return{indicatorthickness:10}},setup(e){return{roboStore:P(e.deviceid),nodusedmodel:z(10)}},computed:{heading(){return this.roboStore.currentcourse-Math.round(this.indicatorthickness/2)}}},xe={class:"column items-center justify-end"},we={class:""};function Ce(e,o,d,t,u,r){return l(),i(X,{"show-value":"",class:"text-white generic-hover-transition",size:"2.5em",color:t.roboStore.color,"center-color":t.roboStore.color,"track-color":"transparent","font-size":"0.5em",thickness:0,min:0,max:360,"model-value":t.nodusedmodel,value:u.indicatorthickness,angle:r.heading},{default:a(()=>[c("div",xe,[c("div",we,v(t.roboStore.number),1)]),s(B,{class:"bg-dark text-white",anchor:"top middle",self:"bottom middle"},{default:a(()=>[w(v(t.roboStore.name),1)]),_:1})]),_:1},8,["color","center-color","model-value","value","angle"])}var Me=C(pe,[["render",Ce]]);const Be={name:"BatteryStatus",props:["battery"],setup(e){return{}},computed:{battery_icon:function(e){return e.battery>90?"battery_full":e.battery>70?"battery_6_bar":e.battery>60?"battery_5_bar":e.battery>50?"battery_4_bar":e.battery>40?"battery_3_bar":e.battery>30?"battery_2_bar":e.battery>20?"battery_1_bar":e.battery>10?"battery_0_bar":"battery_alert"},battery_icon_color:function(e){return e.battery>60?"green":e.battery>40?"warning":e.battery>20?"red":"pink"},battery_animation:function(e){return e.battery>30?"":"blinking"}}};function Ve(e,o,d,t,u,r){return l(),i(f,{flat:"",round:"",dense:"",class:L(r.battery_animation),color:r.battery_icon_color,icon:r.battery_icon},{default:a(()=>[s(B,{class:"bg-dark text-white",anchor:"top middle",self:"bottom middle"},{default:a(()=>[w("Battery "+v(d.battery)+"%",1)]),_:1})]),_:1},8,["class","color","icon"])}var Ne=C(Be,[["render",Ve]]);const ze={name:"GPSStatus",props:["positionvalid"],setup(){return{}}};function Pe(e,o,d,t,u,r){return d.positionvalid?(l(),i(f,{key:0,flat:"",round:"",dense:"",color:"green",icon:"gps_fixed"},{default:a(()=>[s(B,{class:"bg-dark",anchor:"top middle",self:"bottom middle"},{default:a(()=>[w("GPS Available")]),_:1})]),_:1})):(l(),i(f,{key:1,dense:"",round:"",color:"red",icon:"gps_not_fixed"},{default:a(()=>[s(B,{class:"bg-dark",color:"green",anchor:"top middle",self:"bottom middle"},{default:a(()=>[w("No GPS")]),_:1})]),_:1}))}var Qe=C(ze,[["render",Pe]]);const Te={name:"SignalStatus",props:["signalstrength"],setup(){return{}},computed:{signalstrength_icon:function(e){return e.signalstrength>-80?"wifi":e.signalstrength>-95?"wifi_2_bar":"wifi_1_bar"},signalstrength_icon_color:function(e){return e.signalstrength>-80?"green":e.signalstrength>-95?"orange":"red"}}};function qe(e,o,d,t,u,r){return l(),i(f,{flat:"",round:"",dense:"",color:r.signalstrength_icon_color,icon:r.signalstrength_icon},{default:a(()=>[s(B,{class:"bg-dark text-white",anchor:"top middle",self:"bottom middle"},{default:a(()=>[w(v(d.signalstrength)+"dBm",1)]),_:1})]),_:1},8,["color","icon"])}var $e=C(Te,[["render",qe]]);const O=[34,37,40,33,39,38],Fe=Object.keys(J);var I=R({name:"QKnob",props:{...ge,...J,modelValue:{type:Number,required:!0},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},tabindex:{type:[Number,String],default:0},disable:Boolean,readonly:Boolean},emits:["update:modelValue","change","dragValue"],setup(e,{slots:o,emit:d}){const{proxy:t}=ve(),{$q:u}=t,r=z(e.modelValue),g=z(!1),S=b(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),M=b(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax);let k;function Q(){r.value=e.modelValue===null?S.value:G(e.modelValue,S.value,M.value),q(!0)}be(()=>`${e.modelValue}|${S.value}|${M.value}`,Q),Q();const p=b(()=>e.disable===!1&&e.readonly===!1),F=b(()=>"q-knob non-selectable"+(p.value===!0?" q-knob--editable":e.disable===!0?" disabled":"")),T=b(()=>(String(e.step).trim().split(".")[1]||"").length),V=b(()=>e.step===0?1:e.step),W=b(()=>e.instantFeedback===!0||g.value===!0),Y=u.platform.is.mobile===!0?b(()=>p.value===!0?{onClick:K}:{}):b(()=>p.value===!0?{onMousedown:re,onClick:K,onKeydown:ne,onKeyup:ae}:{}),Z=b(()=>p.value===!0?{tabindex:e.tabindex}:{[`aria-${e.disable===!0?"disabled":"readonly"}`]:"true"}),ee=b(()=>{const n={};return Fe.forEach(_=>{n[_]=e[_]}),n});function te(n){n.isFinal?(N(n.evt,!0),g.value=!1):(n.isFirst&&(j(),g.value=!0),N(n.evt))}const oe=b(()=>[[ue,te,void 0,{prevent:!0,stop:!0,mouse:!0}]]);function j(){const{top:n,left:_,width:y,height:$}=t.$el.getBoundingClientRect();k={top:n+$/2,left:_+y/2}}function re(n){j(),N(n)}function K(n){j(),N(n,!0)}function ne(n){if(!O.includes(n.keyCode))return;fe(n);const _=([34,33].includes(n.keyCode)?10:1)*V.value,y=[34,37,40].includes(n.keyCode)?-_:_;r.value=G(parseFloat((r.value+y).toFixed(T.value)),S.value,M.value),q()}function N(n,_){const y=_e(n),$=Math.abs(y.top-k.top),ie=Math.sqrt($**2+Math.abs(y.left-k.left)**2);let m=Math.asin($/ie)*(180/Math.PI);y.top<k.top?m=k.left<y.left?90-m:270+m:m=k.left<y.left?m+90:270-m,u.lang.rtl===!0?m=D(-m-e.angle,0,360):e.angle&&(m=D(m-e.angle,0,360)),e.reverse===!0&&(m=360-m);let h=e.min+m/360*(e.max-e.min);if(V.value!==0){const A=h%V.value;h=h-A+(Math.abs(A)>=V.value/2?(A<0?-1:1)*V.value:0),h=parseFloat(h.toFixed(T.value))}h=G(h,S.value,M.value),d("dragValue",h),r.value!==h&&(r.value=h),q(_)}function ae(n){O.includes(n.keyCode)&&q(!0)}function q(n){e.modelValue!==r.value&&d("update:modelValue",r.value),n===!0&&d("change",r.value)}const se=ye(e);function le(){return U("input",se.value)}return()=>{const n={class:F.value,role:"slider","aria-valuemin":S.value,"aria-valuemax":M.value,"aria-valuenow":e.modelValue,...Z.value,...ee.value,value:r.value,instantFeedback:W.value,...Y.value},_={default:o.default};return p.value===!0&&e.name!==void 0&&(_.internal=le),ce(X,n,_,"knob",p.value,()=>oe.value)}}});const je={name:"CourseControl",props:["deviceid"],components:{},data(){return{indicatorthickness:10}},setup(e){return{roboStore:P(e.deviceid),nodusedmodel:z(10)}},computed:{indicatortangle(){return this.roboStore.desiredcourse-Math.round(this.indicatorthickness/2)}},methods:{updatedesiredcourse(e){var o=this.roboStore.desiredcourse+e;o>180&&(o-=360),o<-180&&(o+=360),o=Math.ceil(o/5)*5,this.roboStore.setdesiredcourse(o)}}},Ae={class:"column items-center justify-end"},Ge={class:""},Ie=c("div",{class:"text-subtitle2"},"Course \xB0",-1),Re={class:"text-subtitle2"},Ue={class:"column items-center justify-end"},Ke={class:""},Ee=c("div",{class:"text-subtitle2"},"Course \xB0",-1),He={class:"text-subtitle2"};function De(e,o,d,t,u,r){return t.roboStore.isManual?(l(),i(I,{key:0,"show-value":"",class:"text-white generic-hover-transition",size:"8em",color:"white","center-color":"primary","track-color":"transparent","font-size":"0.30em",thickness:.1,min:0,max:360,"model-value":t.nodusedmodel,value:u.indicatorthickness,step:5,angle:r.indicatortangle,"onUpdate:modelValue":r.updatedesiredcourse},{default:a(()=>[c("div",Ae,[c("div",Ge,v(t.roboStore.desiredcourse),1),Ie,c("div",Re,"gps "+v(t.roboStore.gpscourse)+" \xB0",1)])]),_:1},8,["model-value","value","angle","onUpdate:modelValue"])):(l(),i(I,{key:1,readonly:"","show-value":"",class:"text-white generic-hover-transition",size:"8em",color:"white","center-color":"primary","track-color":"transparent","font-size":"0.30em",thickness:.1,min:0,max:360,"model-value":t.nodusedmodel,value:u.indicatorthickness,step:5,angle:t.roboStore.currentcourse,"onUpdate:modelValue":r.updatedesiredcourse},{default:a(()=>[c("div",Ue,[c("div",Ke,v(t.roboStore.currentcourse),1),Ee,c("div",He,"gps "+v(t.roboStore.gpscourse)+" \xB0",1)])]),_:1},8,["model-value","value","angle","onUpdate:modelValue"]))}var Oe=C(je,[["render",De]]);const Le={name:"ThrustControl",props:["deviceid"],components:{},data(){return{indicatorthickness:10}},setup(e){return{roboStore:P(e.deviceid),nodusedmodel:z(10)}},methods:{setsurge(e){e=Math.ceil(e/2)*2,this.roboStore.setsurge(e)}}},Xe={class:"column items-center justify-end"},Je={class:""},We=c("div",{class:"text-subtitle2"},"Thrust",-1),Ye={class:"text-subtitle2"};function Ze(e,o,d,t,u,r){return l(),i(I,{readonly:!t.roboStore.isManual,"show-value":"",class:"text-white",size:"8em",color:"green","center-color":"primary","track-color":"transparent","font-size":"0.30em",thickness:.1,min:0,max:t.roboStore.vmax+1,"model-value":t.nodusedmodel,value:t.roboStore.surge,"onUpdate:modelValue":r.setsurge,step:2},{default:a(()=>[c("div",Xe,[c("div",Je,v(t.roboStore.surge),1),We,c("div",Ye,v(t.roboStore.gpsspeed)+"kt",1)]),s(B,{class:"bg-dark text-white",anchor:"top middle",self:"bottom middle"},{default:a(()=>[w("Thrust")]),_:1})]),_:1},8,["readonly","max","model-value","value","onUpdate:modelValue"])}var et=C(Le,[["render",Ze]]),tt=R({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:o}){const d=b(()=>{const t=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(u=>e[u]===!0).map(u=>`q-btn-group--${u}`).join(" ");return`q-btn-group row no-wrap${t.length!==0?" "+t:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>U("div",{class:d.value},me(o.default))}});const ot={name:"ModeControl",props:["deviceid"],components:{},setup(e){return{roboStore:P(e.deviceid)}}};function rt(e,o,d,t,u,r){return l(),i(tt,{push:"",glossy:""},{default:a(()=>[t.roboStore.isAuto?(l(),i(f,{key:0,label:"Auto",icon:t.roboStore.autoIcon,color:"primary",size:"sm"},null,8,["icon"])):(l(),i(f,{key:1,label:"Auto",icon:t.roboStore.autoIcon,size:"sm",onClick:o[0]||(o[0]=g=>t.roboStore.setmode("auto"))},null,8,["icon"])),t.roboStore.isHold?(l(),i(f,{key:2,label:"Hold",icon:"pause",color:"primary",size:"sm"})):(l(),i(f,{key:3,label:"Hold",icon:"pause",size:"sm",onClick:o[1]||(o[1]=g=>t.roboStore.setmode("hold"))})),t.roboStore.isStopped?(l(),i(f,{key:4,label:"",icon:"stop",color:"red",size:"sm"})):(l(),i(f,{key:5,label:"",icon:"stop",size:"sm",onClick:o[2]||(o[2]=g=>t.roboStore.setmode("stop"))})),t.roboStore.isManual?(l(),i(f,{key:6,label:"Manual",icon:"swipe",color:"green",size:"sm"})):(l(),i(f,{key:7,label:"Manual",icon:"swipe",size:"sm",onClick:o[3]||(o[3]=g=>t.roboStore.setmode("manual"))}))]),_:1})}var nt=C(ot,[["render",rt]]);const at={name:"RobobuoyStatus",props:["deviceid"],components:{MarkNumber:Me,BatteryStatus:Ne,GPSStatus:Qe,SignalStatus:$e,CourseControl:Oe,ThrustControl:et,ModeControl:nt},setup(e){return{roboStore:P(e.deviceid)}}},st={class:"row no-wrap shadow-1"};function lt(e,o,d,t,u,r){const g=x("MarkNumber"),S=x("BatteryStatus"),M=x("GPSStatus"),k=x("SignalStatus"),Q=x("router-link"),p=x("CourseControl"),F=x("ThrustControl"),T=x("ModeControl");return l(),i(he,{flat:"",bordered:"",square:"",class:L(e.$q.dark.isActive?"bg-grey-9":"bg-grey-2")},{default:a(()=>[c("div",st,[s(E,{class:"col-6"},{default:a(()=>[s(g,{number:t.roboStore.number},null,8,["number"]),s(de,null,{default:a(()=>[w(v(t.roboStore.name),1)]),_:1})]),_:1}),s(E,{class:"col-6"},{default:a(()=>[s(ke),s(S,{battery:t.roboStore.battery},null,8,["battery"]),s(M,{positionvalid:t.roboStore.positionvalid},null,8,["positionvalid"]),s(k,{signalstrength:t.roboStore.localrssi},null,8,["signalstrength"]),s(Q,{to:{name:"robobuoysettings",params:{deviceid:t.roboStore.deviceid}}},{default:a(()=>[s(f,{flat:"",round:"",dense:"",color:"white",icon:"settings"},{default:a(()=>[s(B,{class:"bg-dark text-white",anchor:"top middle",self:"bottom middle"},{default:a(()=>[w("Settings")]),_:1})]),_:1})]),_:1},8,["to"])]),_:1})]),s(H,{class:"fit row no-wrap justify-evenly"},{default:a(()=>[s(p,{deviceid:t.roboStore.deviceid},null,8,["deviceid"]),s(F,{deviceid:t.roboStore.deviceid},null,8,["deviceid"])]),_:1}),s(H,{class:"fit row no-wrap justify-evenly"},{default:a(()=>[s(T,{deviceid:t.roboStore.deviceid},null,8,["deviceid"])]),_:1})]),_:1},8,["class"])}var ht=C(at,[["render",lt]]);export{ht as R};
