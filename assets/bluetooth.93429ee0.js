import{i as Kt}from"./index.21ef2ba8.js";import{d as lt}from"./index.8ff8d99e.js";import{f as Gt,t as jt}from"./proj.6634b38d.js";var A={},$={};$.byteLength=Yt;$.toByteArray=Xt;$.fromByteArray=zt;var R=[],T=[],Ht=typeof Uint8Array!="undefined"?Uint8Array:Array,q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var k=0,Wt=q.length;k<Wt;++k)R[k]=q[k],T[q.charCodeAt(k)]=k;T["-".charCodeAt(0)]=62;T["_".charCodeAt(0)]=63;function pt(s){var a=s.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=s.indexOf("=");o===-1&&(o=a);var l=o===a?0:4-o%4;return[o,l]}function Yt(s){var a=pt(s),o=a[0],l=a[1];return(o+l)*3/4-l}function qt(s,a,o){return(a+o)*3/4-o}function Xt(s){var a,o=pt(s),l=o[0],p=o[1],d=new Ht(qt(s,l,p)),w=0,c=p>0?l-4:l,U;for(U=0;U<c;U+=4)a=T[s.charCodeAt(U)]<<18|T[s.charCodeAt(U+1)]<<12|T[s.charCodeAt(U+2)]<<6|T[s.charCodeAt(U+3)],d[w++]=a>>16&255,d[w++]=a>>8&255,d[w++]=a&255;return p===2&&(a=T[s.charCodeAt(U)]<<2|T[s.charCodeAt(U+1)]>>4,d[w++]=a&255),p===1&&(a=T[s.charCodeAt(U)]<<10|T[s.charCodeAt(U+1)]<<4|T[s.charCodeAt(U+2)]>>2,d[w++]=a>>8&255,d[w++]=a&255),d}function Vt(s){return R[s>>18&63]+R[s>>12&63]+R[s>>6&63]+R[s&63]}function Jt(s,a,o){for(var l,p=[],d=a;d<o;d+=3)l=(s[d]<<16&16711680)+(s[d+1]<<8&65280)+(s[d+2]&255),p.push(Vt(l));return p.join("")}function zt(s){for(var a,o=s.length,l=o%3,p=[],d=16383,w=0,c=o-l;w<c;w+=d)p.push(Jt(s,w,w+d>c?c:w+d));return l===1?(a=s[o-1],p.push(R[a>>2]+R[a<<4&63]+"==")):l===2&&(a=(s[o-2]<<8)+s[o-1],p.push(R[a>>10]+R[a>>4&63]+R[a<<2&63]+"=")),p.join("")}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(s){const a=$,o=Kt,l=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.Buffer=c,s.SlowBuffer=Et,s.INSPECT_MAX_BYTES=50;const p=2147483647;s.kMaxLength=p,c.TYPED_ARRAY_SUPPORT=d(),!c.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const r=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(r,t),r.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(!!c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(!!c.isBuffer(this))return this.byteOffset}});function w(r){if(r>p)throw new RangeError('The value "'+r+'" is invalid for option "size"');const t=new Uint8Array(r);return Object.setPrototypeOf(t,c.prototype),t}function c(r,t,e){if(typeof r=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return O(r)}return U(r,t,e)}c.poolSize=8192;function U(r,t,e){if(typeof r=="string")return mt(r,t);if(ArrayBuffer.isView(r))return xt(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(S(r,ArrayBuffer)||r&&S(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(S(r,SharedArrayBuffer)||r&&S(r.buffer,SharedArrayBuffer)))return G(r,t,e);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return c.from(n,t,e);const i=Bt(r);if(i)return i;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return c.from(r[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}c.from=function(r,t,e){return U(r,t,e)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function z(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function gt(r,t,e){return z(r),r<=0?w(r):t!==void 0?typeof e=="string"?w(r).fill(t,e):w(r).fill(t):w(r)}c.alloc=function(r,t,e){return gt(r,t,e)};function O(r){return z(r),w(r<0?0:j(r)|0)}c.allocUnsafe=function(r){return O(r)},c.allocUnsafeSlow=function(r){return O(r)};function mt(r,t){if((typeof t!="string"||t==="")&&(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const e=Z(r,t)|0;let n=w(e);const i=n.write(r,t);return i!==e&&(n=n.slice(0,i)),n}function K(r){const t=r.length<0?0:j(r.length)|0,e=w(t);for(let n=0;n<t;n+=1)e[n]=r[n]&255;return e}function xt(r){if(S(r,Uint8Array)){const t=new Uint8Array(r);return G(t.buffer,t.byteOffset,t.byteLength)}return K(r)}function G(r,t,e){if(t<0||r.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');let n;return t===void 0&&e===void 0?n=new Uint8Array(r):e===void 0?n=new Uint8Array(r,t):n=new Uint8Array(r,t,e),Object.setPrototypeOf(n,c.prototype),n}function Bt(r){if(c.isBuffer(r)){const t=j(r.length)|0,e=w(t);return e.length===0||r.copy(e,0,0,t),e}if(r.length!==void 0)return typeof r.length!="number"||Y(r.length)?w(0):K(r);if(r.type==="Buffer"&&Array.isArray(r.data))return K(r.data)}function j(r){if(r>=p)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return r|0}function Et(r){return+r!=r&&(r=0),c.alloc(+r)}c.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==c.prototype},c.compare=function(t,e){if(S(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),S(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,i=e.length;for(let u=0,h=Math.min(n,i);u<h;++u)if(t[u]!==e[u]){n=t[u],i=e[u];break}return n<i?-1:i<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return c.alloc(0);let n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const i=c.allocUnsafe(e);let u=0;for(n=0;n<t.length;++n){let h=t[n];if(S(h,Uint8Array))u+h.length>i.length?(c.isBuffer(h)||(h=c.from(h)),h.copy(i,u)):Uint8Array.prototype.set.call(i,h,u);else if(c.isBuffer(h))h.copy(i,u);else throw new TypeError('"list" argument must be an Array of Buffers');u+=h.length}return i};function Z(r,t){if(c.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||S(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);const e=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&e===0)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return W(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return ht(r).length;default:if(i)return n?-1:W(r).length;t=(""+t).toLowerCase(),i=!0}}c.byteLength=Z;function It(r,t,e){let n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(r||(r="utf8");;)switch(r){case"hex":return _t(this,t,e);case"utf8":case"utf-8":return et(this,t,e);case"ascii":return Ct(this,t,e);case"latin1":case"binary":return Lt(this,t,e);case"base64":return St(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return vt(this,t,e);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}c.prototype._isBuffer=!0;function L(r,t,e){const n=r[t];r[t]=r[e],r[e]=n}c.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)L(this,e,e+1);return this},c.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)L(this,e,e+3),L(this,e+1,e+2);return this},c.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)L(this,e,e+7),L(this,e+1,e+6),L(this,e+2,e+5),L(this,e+3,e+4);return this},c.prototype.toString=function(){const t=this.length;return t===0?"":arguments.length===0?et(this,0,t):It.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:c.compare(this,t)===0},c.prototype.inspect=function(){let t="";const e=s.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},l&&(c.prototype[l]=c.prototype.inspect),c.prototype.compare=function(t,e,n,i,u){if(S(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),u===void 0&&(u=this.length),e<0||n>t.length||i<0||u>this.length)throw new RangeError("out of range index");if(i>=u&&e>=n)return 0;if(i>=u)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,u>>>=0,this===t)return 0;let h=u-i,y=n-e;const B=Math.min(h,y),x=this.slice(i,u),E=t.slice(e,n);for(let m=0;m<B;++m)if(x[m]!==E[m]){h=x[m],y=E[m];break}return h<y?-1:y<h?1:0};function Q(r,t,e,n,i){if(r.length===0)return-1;if(typeof e=="string"?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,Y(e)&&(e=i?0:r.length-1),e<0&&(e=r.length+e),e>=r.length){if(i)return-1;e=r.length-1}else if(e<0)if(i)e=0;else return-1;if(typeof t=="string"&&(t=c.from(t,n)),c.isBuffer(t))return t.length===0?-1:tt(r,t,e,n,i);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,t,e):Uint8Array.prototype.lastIndexOf.call(r,t,e):tt(r,[t],e,n,i);throw new TypeError("val must be string, number or Buffer")}function tt(r,t,e,n,i){let u=1,h=r.length,y=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||t.length<2)return-1;u=2,h/=2,y/=2,e/=2}function B(E,m){return u===1?E[m]:E.readUInt16BE(m*u)}let x;if(i){let E=-1;for(x=e;x<h;x++)if(B(r,x)===B(t,E===-1?0:x-E)){if(E===-1&&(E=x),x-E+1===y)return E*u}else E!==-1&&(x-=x-E),E=-1}else for(e+y>h&&(e=h-y),x=e;x>=0;x--){let E=!0;for(let m=0;m<y;m++)if(B(r,x+m)!==B(t,m)){E=!1;break}if(E)return x}return-1}c.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},c.prototype.indexOf=function(t,e,n){return Q(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return Q(this,t,e,n,!1)};function Ft(r,t,e,n){e=Number(e)||0;const i=r.length-e;n?(n=Number(n),n>i&&(n=i)):n=i;const u=t.length;n>u/2&&(n=u/2);let h;for(h=0;h<n;++h){const y=parseInt(t.substr(h*2,2),16);if(Y(y))return h;r[e+h]=y}return h}function At(r,t,e,n){return P(W(t,r.length-e),r,e,n)}function Ut(r,t,e,n){return P(Pt(t),r,e,n)}function bt(r,t,e,n){return P(ht(t),r,e,n)}function Tt(r,t,e,n){return P($t(t,r.length-e),r,e,n)}c.prototype.write=function(t,e,n,i){if(e===void 0)i="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")i=e,n=this.length,e=0;else if(isFinite(e))e=e>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const u=this.length-e;if((n===void 0||n>u)&&(n=u),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let h=!1;for(;;)switch(i){case"hex":return Ft(this,t,e,n);case"utf8":case"utf-8":return At(this,t,e,n);case"ascii":case"latin1":case"binary":return Ut(this,t,e,n);case"base64":return bt(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Tt(this,t,e,n);default:if(h)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),h=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function St(r,t,e){return t===0&&e===r.length?a.fromByteArray(r):a.fromByteArray(r.slice(t,e))}function et(r,t,e){e=Math.min(r.length,e);const n=[];let i=t;for(;i<e;){const u=r[i];let h=null,y=u>239?4:u>223?3:u>191?2:1;if(i+y<=e){let B,x,E,m;switch(y){case 1:u<128&&(h=u);break;case 2:B=r[i+1],(B&192)===128&&(m=(u&31)<<6|B&63,m>127&&(h=m));break;case 3:B=r[i+1],x=r[i+2],(B&192)===128&&(x&192)===128&&(m=(u&15)<<12|(B&63)<<6|x&63,m>2047&&(m<55296||m>57343)&&(h=m));break;case 4:B=r[i+1],x=r[i+2],E=r[i+3],(B&192)===128&&(x&192)===128&&(E&192)===128&&(m=(u&15)<<18|(B&63)<<12|(x&63)<<6|E&63,m>65535&&m<1114112&&(h=m))}}h===null?(h=65533,y=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|h&1023),n.push(h),i+=y}return Rt(n)}const rt=4096;function Rt(r){const t=r.length;if(t<=rt)return String.fromCharCode.apply(String,r);let e="",n=0;for(;n<t;)e+=String.fromCharCode.apply(String,r.slice(n,n+=rt));return e}function Ct(r,t,e){let n="";e=Math.min(r.length,e);for(let i=t;i<e;++i)n+=String.fromCharCode(r[i]&127);return n}function Lt(r,t,e){let n="";e=Math.min(r.length,e);for(let i=t;i<e;++i)n+=String.fromCharCode(r[i]);return n}function _t(r,t,e){const n=r.length;(!t||t<0)&&(t=0),(!e||e<0||e>n)&&(e=n);let i="";for(let u=t;u<e;++u)i+=Mt[r[u]];return i}function vt(r,t,e){const n=r.slice(t,e);let i="";for(let u=0;u<n.length-1;u+=2)i+=String.fromCharCode(n[u]+n[u+1]*256);return i}c.prototype.slice=function(t,e){const n=this.length;t=~~t,e=e===void 0?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);const i=this.subarray(t,e);return Object.setPrototypeOf(i,c.prototype),i};function F(r,t,e){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+t>e)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(t,e,n){t=t>>>0,e=e>>>0,n||F(t,e,this.length);let i=this[t],u=1,h=0;for(;++h<e&&(u*=256);)i+=this[t+h]*u;return i},c.prototype.readUintBE=c.prototype.readUIntBE=function(t,e,n){t=t>>>0,e=e>>>0,n||F(t,e,this.length);let i=this[t+--e],u=1;for(;e>0&&(u*=256);)i+=this[t+--e]*u;return i},c.prototype.readUint8=c.prototype.readUInt8=function(t,e){return t=t>>>0,e||F(t,1,this.length),this[t]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(t,e){return t=t>>>0,e||F(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(t,e){return t=t>>>0,e||F(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(t,e){return t=t>>>0,e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(t,e){return t=t>>>0,e||F(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readBigUInt64LE=C(function(t){t=t>>>0,v(t,"offset");const e=this[t],n=this[t+7];(e===void 0||n===void 0)&&D(t,this.length-8);const i=e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,u=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(i)+(BigInt(u)<<BigInt(32))}),c.prototype.readBigUInt64BE=C(function(t){t=t>>>0,v(t,"offset");const e=this[t],n=this[t+7];(e===void 0||n===void 0)&&D(t,this.length-8);const i=e*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],u=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(u)}),c.prototype.readIntLE=function(t,e,n){t=t>>>0,e=e>>>0,n||F(t,e,this.length);let i=this[t],u=1,h=0;for(;++h<e&&(u*=256);)i+=this[t+h]*u;return u*=128,i>=u&&(i-=Math.pow(2,8*e)),i},c.prototype.readIntBE=function(t,e,n){t=t>>>0,e=e>>>0,n||F(t,e,this.length);let i=e,u=1,h=this[t+--i];for(;i>0&&(u*=256);)h+=this[t+--i]*u;return u*=128,h>=u&&(h-=Math.pow(2,8*e)),h},c.prototype.readInt8=function(t,e){return t=t>>>0,e||F(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},c.prototype.readInt16LE=function(t,e){t=t>>>0,e||F(t,2,this.length);const n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n},c.prototype.readInt16BE=function(t,e){t=t>>>0,e||F(t,2,this.length);const n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n},c.prototype.readInt32LE=function(t,e){return t=t>>>0,e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return t=t>>>0,e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readBigInt64LE=C(function(t){t=t>>>0,v(t,"offset");const e=this[t],n=this[t+7];(e===void 0||n===void 0)&&D(t,this.length-8);const i=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)}),c.prototype.readBigInt64BE=C(function(t){t=t>>>0,v(t,"offset");const e=this[t],n=this[t+7];(e===void 0||n===void 0)&&D(t,this.length-8);const i=(e<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(i)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)}),c.prototype.readFloatLE=function(t,e){return t=t>>>0,e||F(t,4,this.length),o.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return t=t>>>0,e||F(t,4,this.length),o.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return t=t>>>0,e||F(t,8,this.length),o.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return t=t>>>0,e||F(t,8,this.length),o.read(this,t,!1,52,8)};function b(r,t,e,n,i,u){if(!c.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<u)throw new RangeError('"value" argument is out of bounds');if(e+n>r.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e=e>>>0,n=n>>>0,!i){const y=Math.pow(2,8*n)-1;b(this,t,e,n,y,0)}let u=1,h=0;for(this[e]=t&255;++h<n&&(u*=256);)this[e+h]=t/u&255;return e+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e=e>>>0,n=n>>>0,!i){const y=Math.pow(2,8*n)-1;b(this,t,e,n,y,0)}let u=n-1,h=1;for(this[e+u]=t&255;--u>=0&&(h*=256);)this[e+u]=t/h&255;return e+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(t,e,n){return t=+t,e=e>>>0,n||b(this,t,e,1,255,0),this[e]=t&255,e+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=e>>>0,n||b(this,t,e,2,65535,0),this[e]=t&255,this[e+1]=t>>>8,e+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=e>>>0,n||b(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=t&255,e+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=e>>>0,n||b(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255,e+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=e>>>0,n||b(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};function nt(r,t,e,n,i){at(t,n,i,r,e,7);let u=Number(t&BigInt(4294967295));r[e++]=u,u=u>>8,r[e++]=u,u=u>>8,r[e++]=u,u=u>>8,r[e++]=u;let h=Number(t>>BigInt(32)&BigInt(4294967295));return r[e++]=h,h=h>>8,r[e++]=h,h=h>>8,r[e++]=h,h=h>>8,r[e++]=h,e}function it(r,t,e,n,i){at(t,n,i,r,e,7);let u=Number(t&BigInt(4294967295));r[e+7]=u,u=u>>8,r[e+6]=u,u=u>>8,r[e+5]=u,u=u>>8,r[e+4]=u;let h=Number(t>>BigInt(32)&BigInt(4294967295));return r[e+3]=h,h=h>>8,r[e+2]=h,h=h>>8,r[e+1]=h,h=h>>8,r[e]=h,e+8}c.prototype.writeBigUInt64LE=C(function(t,e=0){return nt(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=C(function(t,e=0){return it(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e=e>>>0,!i){const B=Math.pow(2,8*n-1);b(this,t,e,n,B-1,-B)}let u=0,h=1,y=0;for(this[e]=t&255;++u<n&&(h*=256);)t<0&&y===0&&this[e+u-1]!==0&&(y=1),this[e+u]=(t/h>>0)-y&255;return e+n},c.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e=e>>>0,!i){const B=Math.pow(2,8*n-1);b(this,t,e,n,B-1,-B)}let u=n-1,h=1,y=0;for(this[e+u]=t&255;--u>=0&&(h*=256);)t<0&&y===0&&this[e+u+1]!==0&&(y=1),this[e+u]=(t/h>>0)-y&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e=e>>>0,n||b(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=t&255,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e=e>>>0,n||b(this,t,e,2,32767,-32768),this[e]=t&255,this[e+1]=t>>>8,e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e=e>>>0,n||b(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=t&255,e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e=e>>>0,n||b(this,t,e,4,2147483647,-2147483648),this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e=e>>>0,n||b(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4},c.prototype.writeBigInt64LE=C(function(t,e=0){return nt(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=C(function(t,e=0){return it(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ot(r,t,e,n,i,u){if(e+n>r.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function ut(r,t,e,n,i){return t=+t,e=e>>>0,i||ot(r,t,e,4),o.write(r,t,e,n,23,4),e+4}c.prototype.writeFloatLE=function(t,e,n){return ut(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return ut(this,t,e,!1,n)};function st(r,t,e,n,i){return t=+t,e=e>>>0,i||ot(r,t,e,8),o.write(r,t,e,n,52,8),e+8}c.prototype.writeDoubleLE=function(t,e,n){return st(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return st(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,i){if(!c.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);const u=i-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(e,n,i):Uint8Array.prototype.set.call(t,this.subarray(n,i),e),u},c.prototype.fill=function(t,e,n,i){if(typeof t=="string"){if(typeof e=="string"?(i=e,e=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(t.length===1){const h=t.charCodeAt(0);(i==="utf8"&&h<128||i==="latin1")&&(t=h)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e=e>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let u;if(typeof t=="number")for(u=e;u<n;++u)this[u]=t;else{const h=c.isBuffer(t)?t:c.from(t,i),y=h.length;if(y===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(u=0;u<n-e;++u)this[u+e]=h[u%y]}return this};const _={};function H(r,t,e){_[r]=class extends e{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}H("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),H("ERR_INVALID_ARG_TYPE",function(r,t){return`The "${r}" argument must be of type number. Received type ${typeof t}`},TypeError),H("ERR_OUT_OF_RANGE",function(r,t,e){let n=`The value of "${r}" is out of range.`,i=e;return Number.isInteger(e)&&Math.abs(e)>2**32?i=ct(String(e)):typeof e=="bigint"&&(i=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(i=ct(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n},RangeError);function ct(r){let t="",e=r.length;const n=r[0]==="-"?1:0;for(;e>=n+4;e-=3)t=`_${r.slice(e-3,e)}${t}`;return`${r.slice(0,e)}${t}`}function kt(r,t,e){v(t,"offset"),(r[t]===void 0||r[t+e]===void 0)&&D(t,r.length-(e+1))}function at(r,t,e,n,i,u){if(r>e||r<t){const h=typeof t=="bigint"?"n":"";let y;throw u>3?t===0||t===BigInt(0)?y=`>= 0${h} and < 2${h} ** ${(u+1)*8}${h}`:y=`>= -(2${h} ** ${(u+1)*8-1}${h}) and < 2 ** ${(u+1)*8-1}${h}`:y=`>= ${t}${h} and <= ${e}${h}`,new _.ERR_OUT_OF_RANGE("value",y,r)}kt(n,i,u)}function v(r,t){if(typeof r!="number")throw new _.ERR_INVALID_ARG_TYPE(t,"number",r)}function D(r,t,e){throw Math.floor(r)!==r?(v(r,e),new _.ERR_OUT_OF_RANGE(e||"offset","an integer",r)):t<0?new _.ERR_BUFFER_OUT_OF_BOUNDS:new _.ERR_OUT_OF_RANGE(e||"offset",`>= ${e?1:0} and <= ${t}`,r)}const Dt=/[^+/0-9A-Za-z-_]/g;function Nt(r){if(r=r.split("=")[0],r=r.trim().replace(Dt,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function W(r,t){t=t||1/0;let e;const n=r.length;let i=null;const u=[];for(let h=0;h<n;++h){if(e=r.charCodeAt(h),e>55295&&e<57344){if(!i){if(e>56319){(t-=3)>-1&&u.push(239,191,189);continue}else if(h+1===n){(t-=3)>-1&&u.push(239,191,189);continue}i=e;continue}if(e<56320){(t-=3)>-1&&u.push(239,191,189),i=e;continue}e=(i-55296<<10|e-56320)+65536}else i&&(t-=3)>-1&&u.push(239,191,189);if(i=null,e<128){if((t-=1)<0)break;u.push(e)}else if(e<2048){if((t-=2)<0)break;u.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;u.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;u.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return u}function Pt(r){const t=[];for(let e=0;e<r.length;++e)t.push(r.charCodeAt(e)&255);return t}function $t(r,t){let e,n,i;const u=[];for(let h=0;h<r.length&&!((t-=2)<0);++h)e=r.charCodeAt(h),n=e>>8,i=e%256,u.push(i),u.push(n);return u}function ht(r){return a.toByteArray(Nt(r))}function P(r,t,e,n){let i;for(i=0;i<n&&!(i+e>=t.length||i>=r.length);++i)t[i+e]=r[i];return i}function S(r,t){return r instanceof t||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===t.name}function Y(r){return r!==r}const Mt=function(){const r="0123456789abcdef",t=new Array(256);for(let e=0;e<16;++e){const n=e*16;for(let i=0;i<16;++i)t[n+i]=r[e]+r[i]}return t}();function C(r){return typeof BigInt=="undefined"?Ot:r}function Ot(){throw new Error("BigInt not supported")}})(A);window.Buffer=A.Buffer;const Zt=105,Qt=102,te=106,ee=58,re=100,ne=108,N=101;function M(s,a,o){for(var l=0,p=1,d=a;d<o;d++){var w=s[d];if(w<58&&w>=48){l=l*10+(w-48);continue}if(!(d===a&&w===43)){if(d===a&&w===45){p=-1;continue}if(w===46)break;throw new Error("not a number: buffer["+d+"] = "+w)}}return l*p}function ie(s){var a="";function o(l,p){a=a+l;try{var d=f(a,p);s(d),a=""}catch(w){console.log(w),a=""}}return o}function f(s,a,o,l){return s==null||s.length===0?null:(typeof a!="number"&&l==null&&(l=a,a=void 0),typeof o!="number"&&l==null&&(l=o,o=void 0),f.position=0,f.encoding=l||null,f.data=A.Buffer.isBuffer(s)?s.slice(a,o):new A.Buffer(s),f.bytes=f.data.length,f.next())}f.bytes=0;f.position=0;f.data=null;f.encoding=null;f.next=function(){switch(f.data[f.position]){case re:return f.dictionary();case ne:return f.list();case Zt:return f.integer();case Qt:return f.float();case te:return f.boolean();default:return f.buffer()}};f.find=function(s){for(var a=f.position,o=f.data.length,l=f.data;a<o;){if(l[a]===s)return a;a++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(s)+'" [0x'+s.toString(16)+"]")};f.dictionary=function(){f.position++;for(var s={};f.data[f.position]!==N;)s[f.buffer()]=f.next();return f.position++,s};f.list=function(){f.position++;for(var s=[];f.data[f.position]!==N;)s.push(f.next());return f.position++,s};f.integer=function(){var s=f.find(N),a=M(f.data,f.position+1,s);return f.position+=s+1-f.position,a};f.float=function(){var s=f.find(N);M(f.data,f.position+1,s);var a=Number(f.data.slice(f.position+1,s));return f.position+=s+1-f.position,a};f.boolean=function(){var s=f.find(N),a=M(f.data,f.position+1,s);if(f.position+=s+1-f.position,a==1)return!0;if(a==0)return!1};f.buffer=function(){var s=f.find(ee),a=M(f.data,f.position,s),o=++s+a;return f.position=o,f.encoding?f.data.toString(f.encoding,s,o):f.data.slice(s,o)};window.Buffer=A.Buffer;function I(s,a,o){var l=[],p=null;return I._encode(l,s),p=A.Buffer.concat(l),I.bytes=p.length,A.Buffer.isBuffer(a)?(p.copy(a,o),a):p}I.bytes=-1;I._floatConversionDetected=!1;I._encode=function(s,a){if(A.Buffer.isBuffer(a)){s.push(A.Buffer.from(a.length+":")),s.push(a);return}if(a!=null)switch(typeof a){case"string":I.buffer(s,a);break;case"number":if(a%1){I.float(s,a);break}else{I.number(s,a);break}case"object":a.constructor===Array?I.list(s,a):I.dict(s,a);break;case"boolean":I.boolean(s,a);break;case"float":I.float(s,a);break}};var dt=A.Buffer.from("e"),oe=A.Buffer.from("d"),ue=A.Buffer.from("l");I.buffer=function(s,a){s.push(A.Buffer.from(A.Buffer.byteLength(a)+":"+a))};I.number=function(s,a){var o=2147483648,l=a/o<<0,p=a%o<<0,d=l*o+p;s.push(A.Buffer.from("i"+d+"e"))};I.float=function(s,a){var o=String(a);s.push(A.Buffer.from("f"+o+"e"))};I.boolean=function(s,a){var o=a?1:0;s.push(A.Buffer.from("j"+o+"e")),a==!0||a==!1||(console.warn("WARNING: Possible data corruption detected with value "+a),console.trace())};I.dict=function(s,a){s.push(oe);for(var o=0,l,p=Object.keys(a).sort(),d=p.length;o<d;o++)l=p[o],a[l]!=null&&(I.buffer(s,l),I._encode(s,a[l]));s.push(dt)};I.list=function(s,a){var o=0,l=a.length;for(s.push(ue);o<l;o++)a[o]!=null&&I._encode(s,a[o]);s.push(dt)};const yt=lt("devices",{state:()=>({connecteddevices:{}}),actions:{devicecount(){return Object.keys(this.connecteddevices).length},devicebyId(s){return this.connecteddevices[s]},adddevice(s){this.connecteddevices[s.id]=s},removedevice(s){delete this.connecteddevices[s.id]}}}),se=yt(),X=s=>{const a=lt("robobuoyStore/${deviceid}",{state:()=>({device:null,deviceid:s,number:1,color:"primary",name:"Buoy 1",mode:"stop",battery:90,localrssi:0,positionvalid:!1,position:[],gpscourse:0,gpsspeed:0,magcourse:0,magdeclination:0,currentcourse:0,destination:[],distance:0,desiredcourse:0,waypoints:[],waypointarrivedradius:0,holdgain:0,Kp:0,Ki:0,Kd:0,magalpha:0,gpsalpha:0,declinationalpha:0,surge:0,steer:0,steergain:0,vmin:0,vmax:50,mpl:0,mpr:0}),getters:{coordinate:o=>Gt([Number(o.position[1]),Number(o.position[0])]),isStopped:o=>o.mode=="stop",isManual:o=>o.mode=="manual",isHold:o=>o.mode=="hold",isAuto:o=>o.mode=="auto",isUnderway:o=>o.waypoints.length>0&&o.mode=="auto",isHoldStation:o=>o.waypoints.length==0&&o.mode=="auto",autoIcon:o=>{if(o.waypoints.length>0)return"autorenew";if(o.waypoints.length==0)return"anchor"},modeIcon:o=>o.waypoints.length>0&&o.mode=="auto"?"autorenew":o.waypoints.length==0&&o.mode=="auto"?"anchor":o.mode=="manual"?"swipe":o.mode=="stop"?"stop":"",modeColor:o=>o.waypoints.length>0&&o.mode=="auto"||o.waypoints.length==0&&o.mode=="auto"?"primary":o.mode=="manual"?"green":o.mode=="stop"?"red":"black"},actions:{messageHandler(o){this.$patch(o[1])},setlocalrssi(o){o!=null&&(this.localrssi=o)},async getState(){await g.send(this.device,["getState"])},async setnumber(o){this.number=o,await g.send(this.device,["number",this.number])},async setcolor(o){this.color=o,await g.send(this.device,["color",this.color])},async setname(o){this.name=o,await g.send(this.device,["name",this.name])},async setmode(o){this.mode=o,await g.send(this.device,["mode",this.mode])},async setdesiredcourse(o){this.desiredcourse=o,await g.send(this.device,["dc",this.desiredcourse])},async setmagdeclination(o){this.magdeclination=o,await g.send(this.device,["magdeclination",this.magdeclination])},async setwaypoints(){await g.send(this.device,["wp",this.waypoints])},async setwaypointarrivedradius(o){this.waypointarrivedradius=o,await g.send(this.device,["wr",this.waypointarrivedradius])},async setholdgain(o){this.holdgain=o,await g.send(this.device,["holdgain",this.holdgain])},async setKp(o){this.Kp=o,await g.send(this.device,["Kp",this.Kp])},async setKi(o){this.Ki=o,await g.send(this.device,["Ki",this.Ki])},async setKd(o){this.Kd=o,await g.send(this.device,["Kd",this.Kd])},async setmagalpha(o){this.magalpha=o,await g.send(this.device,["magalpha",this.magalpha])},async setgpsalpha(o){this.gpsalpha=o,await g.send(this.device,["gpsalpha",this.gpsalpha])},async setdeclinationalpha(o){this.declinationalpha=o,await g.send(this.device,["declinationalpha",this.declinationalpha])},async setsurge(o){this.surge=o,await g.send(this.device,["surge",this.surge])},async setsteergain(o){this.steergain=o,await g.send(this.device,["steergain",this.steergain])},async setvmin(o){this.vmin=o,await g.send(this.device,["vmin",this.vmin])},async setvmax(o){this.vmax=o,await g.send(this.device,["vmax",this.vmax])},async setmpl(o){this.mpl=o,await g.send(this.device,["mpl",this.mpl])},async setmpr(o){this.mpr=o,await g.send(this.device,["mpr",this.mpr])},getHoldsettings(){g.send(this.device,["getHoldsettings"])},getPIDsettings(){g.send(this.device,["getPIDsettings"])},getMotorsettings(){g.send(this.device,["getMotorsettings"])},getAlphasettings(){g.send(this.device,["getAlphasettings"])},savesettings(){g.send(this.device,["savesettings"])},loadsettings(){g.send(this.device,["loadsettings"])},saveimuconfig(){g.send(this.device,["saveimuconfig"])},loadimuconfig(){g.send(this.device,["loadimuconfig"])},addwaypoint(o){const l=jt(o),p=[Number(l[1]).toFixed(7),Number(l[0]).toFixed(7)];this.waypoints.push(p)},removewaypoint(o){this.waypoints.splice(o,1)},removepath(o){this.waypoints.splice(o)}}})();return a.device=se.devicebyId(s),a},wt="6e400001-b5a3-f393-e0a9-e50e24dcca9e",ce="6e400002-b5a3-f393-e0a9-e50e24dcca9e",ae="6e400003-b5a3-f393-e0a9-e50e24dcca9e",ft=20;let he=new TextDecoder,V=yt();function fe(){if(!navigator.bluetooth){console.log(`WebBluetooth API is not available.\r
Please make sure the Web Bluetooth flag is enabled.`);return}navigator.bluetooth.requestDevice({filters:[{services:["6e400001-b5a3-f393-e0a9-e50e24dcca9e"]}],optionalServices:[wt]}).then(s=>{J(s)})}function le(){console.log("reconnecting devices"),navigator.bluetooth.getDevices().then(async s=>{for(const a of s){a.addEventListener("advertisementreceived",async o=>{J(o.device)},{once:!0});try{await a.watchAdvertisements()}catch(o){console.log(o)}}})}function J(s){console.log("connect",s),s.addEventListener("gattserverdisconnected",async a=>{console.log("Device disconnected itself",a.target),V.removedevice(a.target)},{once:!0}),s.gatt.connect().then(a=>a.getPrimaryService(wt)).then(a=>{a.getCharacteristic(ce).then(o=>{s.rxCharacteristic=o}),a.getCharacteristic(ae).then(o=>{o.startNotifications(),V.adddevice(s),X(s.id).getState(),s.addEventListener("advertisementreceived",async d=>{X(s.id).setlocalrssi(d.rssi)}),o.addEventListener("characteristicvaluechanged",d=>{const w=he.decode(d.target.value);p(w,"utf-8")});const p=ie(d=>{X(s.id).messageHandler(d)});console.log(`\r
`+s.name+" Connected.")})}).catch(a=>{console.log("error",a)})}function pe(s){s&&s.gatt&&s.gatt.connected&&(console.log("disconnecting",s.name,s.id),s.gatt.disconnect(),V.removedevice(s))}async function de(s,a){try{if(s&&s.gatt.connected)for(var o=I(a),l=0;l<=o.byteLength;l=l+ft)await s.rxCharacteristic.writeValue(o.slice(l,l+ft)).then(p=>{setTimeout(p,0)});else console.log("Not connected to a device yet.")}catch{}}const g={pair:fe,reconnect:le,connect:J,disconnect:pe,send:de};export{g as $,X as a,yt as u};
